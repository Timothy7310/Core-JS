# Advanced Functions

## `this` in functions
`this` ‚Äî —ç—Ç–æ —Å—Å—ã–ª–∫–∞ –Ω–∞ –Ω–µ–∫–∏–π –æ–±—ä–µ–∫—Ç, –∫ —Å–≤–æ–π—Å—Ç–≤–∞–º –∫–æ—Ç–æ—Ä–æ–≥–æ –º–æ–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –≤–Ω—É—Ç—Ä–∏ –≤—ã–∑–æ–≤–∞ —Ñ—É–Ω–∫—Ü–∏–∏. –≠—Ç–æ—Ç `this` ‚Äî –∏ –µ—Å—Ç—å _–∫–æ–Ω—Ç–µ–∫—Å—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è_.

–ö–æ–≥–¥–∞ –º—ã –≤—ã–∑—ã–≤–∞–µ–º _—Ñ—É–Ω–∫—Ü–∏—é_, –∑–Ω–∞—á–µ–Ω–∏–µ–º `this` –º–æ–∂–µ—Ç –±—ã—Ç—å –ª–∏—à—å _–≥–ª–æ–±–∞–ª—å–Ω—ã–π –æ–±—ä–µ–∫—Ç_ –∏–ª–∏ `undefined` –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ `'use strict'`.

–ú–æ–∂–Ω–æ —Å–∫–∞–∑–∞—Ç—å, —á—Ç–æ _—Å—Ç—Ä–æ–≥–∏–π —Ä–µ–∂–∏–º_ ‚Äî –Ω–µ–∫–∞–∑–∏—Å—Ç—ã–π —Å–ø–æ—Å–æ–± –±–æ—Ä—å–±—ã —Å –ª–µ–≥–∞—Å–∏.

–í–∫–ª—é—á–∞–µ—Ç—Å—è —Å—Ç—Ä–æ–≥–∏–π —Ä–µ–∂–∏–º —Å –ø–æ–º–æ—â—å—é –¥–∏—Ä–µ–∫—Ç–∏–≤—ã `'use strict'` –≤ –Ω–∞—á–∞–ª–µ –±–ª–æ–∫–∞, –∫–æ—Ç–æ—Ä—ã–π –¥–æ–ª–∂–µ–Ω –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è –≤ —Å—Ç—Ä–æ–≥–æ–º —Ä–µ–∂–∏–º–µ.

```js
function nonStrict() {
  // –ë—É–¥–µ—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è –≤ –Ω–µ—Å—Ç—Ä–æ–≥–æ–º —Ä–µ–∂–∏–º–µ.
}

function strict() {
  'use strict'
  // –ë—É–¥–µ—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è –≤ —Å—Ç—Ä–æ–≥–æ–º —Ä–µ–∂–∏–º–µ.
}
```

üí°–¢–∞–∫–∂–µ `use strict` –Ω–µ—è–≤–Ω–æ –≤–∫–ª—é—á–∞–µ—Ç—Å—è –≤ —Ñ–∞–π–ª–∞—Ö `.js` —Å –∞—Ç—Ä–∏–±—É—Ç–æ–º `module`: `<script src="main.js" type="module"></script>`  
–∏ —Ç–∞–∫–∂–µ –≤–Ω—É—Ç—Ä–∏ –∫–ª–∞—Å—Å–æ–≤.

–í–µ—Ä–Ω—ë–º—Å—è –∫ `this`. –í –Ω–µ—Å—Ç—Ä–æ–≥–æ–º —Ä–µ–∂–∏–º–µ –ø—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ –≤ –±—Ä–∞—É–∑–µ—Ä–µ `this` –ø—Ä–∏ –≤—ã–∑–æ–≤–µ —Ñ—É–Ω–∫—Ü–∏–∏ –±—É–¥–µ—Ç —Ä–∞–≤–µ–Ω `window`:

```js
function whatsThis() {
  console.log(this === window)
}

whatsThis()
// true
```

–¢–æ –∂–µ ‚Äî –µ—Å–ª–∏ —Ñ—É–Ω–∫—Ü–∏—è –æ–±—ä—è–≤–ª–µ–Ω–∞ –≤–Ω—É—Ç—Ä–∏ —Ñ—É–Ω–∫—Ü–∏–∏:

```js
function whatsThis() {
  function whatInside() {
    console.log(this === window)
  }

  whatInside()
}

whatsThis()
// true
```

–ò —Ç–æ –∂–µ ‚Äî –µ—Å–ª–∏ —Ñ—É–Ω–∫—Ü–∏—è –±—É–¥–µ—Ç –∞–Ω–æ–Ω–∏–º–Ω–æ–π –∏, –Ω–∞–ø—Ä–∏–º–µ—Ä, –≤—ã–∑–≤–∞–Ω–∞ –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ:

```js
;(function () {
  console.log(this === window)
})()
// true
```

–í —Å—Ç—Ä–æ–≥–æ–º —Ä–µ–∂–∏–º–µ ‚Äî –∑–Ω–∞—á–µ–Ω–∏–µ –±—É–¥–µ—Ç —Ä–∞–≤–Ω–æ `undefined`:

```js
'use strict'

function whatsThis() {
  console.log(this === undefined)
}

whatsThis()
// true
```

## Understand difference between function and method
–ï—Å–ª–∏ —Ñ—É–Ω–∫—Ü–∏—è —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ –æ–±—ä–µ–∫—Ç–µ ‚Äî —ç—Ç–æ –º–µ—Ç–æ–¥ —ç—Ç–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞.

```js
const user = {
  name: 'Alex',
  greet() {
    console.log(`Hello, my name is ${this.name}`)
  },
}

user.greet()
// Hello, my name is Alex
```

–ü—Ä–∏ –≤—ã–∑–æ–≤–µ —á–µ—Ä–µ–∑ —Ç–æ—á–∫—É `user.greet()` –∑–Ω–∞—á–µ–Ω–∏–µ `this` —Ä–∞–≤–Ω—è–µ—Ç—Å—è –æ–±—ä–µ–∫—Ç—É –¥–æ —Ç–æ—á–∫–∏ (`user`). –ë–µ–∑ —ç—Ç–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞ `this` —Ä–∞–≤–Ω—è–µ—Ç—Å—è –≥–ª–æ–±–∞–ª—å–Ω–æ–º—É –æ–±—ä–µ–∫—Ç—É (–≤ –æ–±—ã—á–Ω–æ–º —Ä–µ–∂–∏–º–µ). –í _—Å—Ç—Ä–æ–≥–æ–º —Ä–µ–∂–∏–º–µ_ –º—ã –±—ã –ø–æ–ª—É—á–∏–ª–∏ –æ—à–∏–±–∫—É `¬´Cannot read properties of undefined¬ª`.

–û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ, —á—Ç–æ `this` –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –≤ –º–æ–º–µ–Ω—Ç –≤—ã–∑–æ–≤–∞ —Ñ—É–Ω–∫—Ü–∏–∏. –ï—Å–ª–∏ –∑–∞–ø–∏—Å–∞—Ç—å –º–µ—Ç–æ–¥ –æ–±—ä–µ–∫—Ç–∞ –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –∏ –≤—ã–∑–≤–∞—Ç—å –µ—ë, –∑–Ω–∞—á–µ–Ω–∏–µ `this` –∏–∑–º–µ–Ω–∏—Ç—Å—è.

```js
const user = {
  name: 'Alex',
  greet() {
    console.log(`Hello, my name is ${this.name}`)
  },
}

const greet = user.greet
greet()
// Hello, my name is
```

## Reference Type & losing `this`

–ö–∞–∫ —Ç–æ–ª—å–∫–æ –º–µ—Ç–æ–¥ –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–æ –æ—Ç –æ–±—ä–µ–∫—Ç–∞ ‚Äî `this` —Ç–µ—Ä—è–µ—Ç—Å—è.

–í–æ—Ç –∫–∞–∫ —ç—Ç–æ –º–æ–∂–µ—Ç –ø—Ä–æ–∏–∑–æ–π—Ç–∏ –≤ —Å–ª—É—á–∞–µ —Å `setTimeout`:

```js
const user = {
  firstname: '–í–∞—Å—è',
  sayHi() {
    console.log(`–ü—Ä–∏–≤–µ—Ç, ${this.firstname}!`)
  }
}

setTimeout(user.sayHi, 1000); // -> –ü—Ä–∏–≤–µ—Ç, undefined!
```

–≠—Ç–æ –ø—Ä–æ–∏–∑–æ—à–ª–æ –ø–æ—Ç–æ–º—É, —á—Ç–æ `setTimeout` –ø–æ–ª—É—á–∏–ª —Ñ—É–Ω–∫—Ü–∏—é `sayHi` –æ—Ç–¥–µ–ª—å–Ω–æ –æ—Ç –æ–±—ä–µ–∫—Ç–∞ `user` (–∏–º–µ–Ω–Ω–æ –∑–¥–µ—Å—å —Ñ—É–Ω–∫—Ü–∏—è –ø–æ—Ç–µ—Ä—è–ª–∞ –∫–æ–Ω—Ç–µ–∫—Å—Ç). –¢–æ –µ—Å—Ç—å –ø–æ—Å–ª–µ–¥–Ω—è—è —Å—Ç—Ä–æ–∫–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø–µ—Ä–µ–ø–∏—Å–∞–Ω–∞ –∫–∞–∫:

```js
let f = user.sayHi;
setTimeout(f, 1000); // –∫–æ–Ω—Ç–µ–∫—Å—Ç user –ø–æ—Ç–µ—Ä—è–Ω
```

–ï—â–µ –≤–Ω—É—Ç—Ä–µ–Ω–Ω—è—è —Ñ—É–Ω–∫—Ü–∏—è –∏–º–µ–µ—Ç –¥–æ—Å—Ç—É–ø –∫–æ –≤—Å–µ–º –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º –≤–Ω–µ—à–Ω–µ–π, –Ω–æ –Ω–µ –∏–º–µ–µ—Ç –¥–æ—Å—Ç—É–ø–∞ `this`. 
–¢–æ –µ—Å—Ç—å: –µ—Å–ª–∏ –≤–Ω–µ—à–Ω—è—è —Ñ—É–Ω–∫—Ü–∏—è –ø—Ä–∏–≤—è–∑–∞–Ω–∞ –∫ –∫–∞–∫–æ–º—É-—Ç–æ DOM —ç–ª–µ–º–µ–Ω—Ç—É, —Ç–æ `this` –≤ –Ω–µ–π –±—É–¥–µ—Ç —É–∫–∞–∑—ã–≤–∞—Ç—å –Ω–∞ —ç—Ç–æ—Ç —ç–ª–µ–º–µ–Ω—Ç, –Ω–æ `this` –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–π —Ñ—É–Ω–∫—Ü–∏–∏ - –Ω–µ –±—É–¥–µ—Ç!

```js
"use strict";

let elem = document.querySelector('#elem');
elem.addEventListener('blur', parent);

function parent() {
	console.log(this); // –≤—ã–≤–µ–¥–µ—Ç —Å—Å—ã–ª–∫—É –Ω–∞ –Ω–∞—à –∏–Ω–ø—É—Ç
	
	function child() {
		console.log(this); // –≤—ã–≤–µ–¥–µ—Ç undefined
	}
	child();
}
```

## Understand how `this` works, realize `this` possible issues
same question

## Manage `this`
_–ù–µ–ø—Ä—è–º—ã–º –≤—ã–∑–æ–≤–æ–º_ –Ω–∞–∑—ã–≤–∞—é—Ç –≤—ã–∑–æ–≤ —Ñ—É–Ω–∫—Ü–∏–π —á–µ—Ä–µ–∑ `call()` –∏–ª–∏ `apply()`.

–û–±–∞ –ø–µ—Ä–≤—ã–º –∞—Ä–≥—É–º–µ–Ω—Ç–æ–º –ø—Ä–∏–Ω–∏–º–∞—é—Ç `this`. –¢–æ –µ—Å—Ç—å –æ–Ω–∏ –ø–æ–∑–≤–æ–ª—è—é—Ç –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –∫–æ–Ω—Ç–µ–∫—Å—Ç —Å–Ω–∞—Ä—É–∂–∏, –∫ —Ç–æ–º—É –∂–µ ‚Äî —è–≤–Ω–æ.

```js
function greet() {
  console.log(`Hello, ${this.name}`)
}

const user1 = { name: 'Alex' }
const user2 = { name: 'Ivan' }

greet.call(user1)
// Hello, Alex
greet.call(user2)
// Hello, Ivan

greet.apply(user1)
// Hello, Alex
greet.apply(user2)
// Hello, Ivan
```

–í –æ–±–æ–∏—Ö —Å–ª—É—á–∞—è—Ö –≤ –ø–µ—Ä–≤–æ–º –≤—ã–∑–æ–≤–µ `this` === `user1`, –≤–æ –≤—Ç–æ—Ä–æ–º ‚Äî `user2`

–†–∞–∑–Ω–∏—Ü–∞ –º–µ–∂–¥—É `call()` –∏ `apply()` ‚Äî –≤ —Ç–æ–º, –∫–∞–∫ –æ–Ω–∏ –ø—Ä–∏–Ω–∏–º–∞—é—Ç –∞—Ä–≥—É–º–µ–Ω—Ç—ã –¥–ª—è —Å–∞–º–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ –ø–æ—Å–ª–µ `this`.

`call()` –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –∞—Ä–≥—É–º–µ–Ω—Ç—ã —Å–ø–∏—Å–∫–æ–º —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é, `apply()` –∂–µ ‚Äî –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –º–∞—Å—Å–∏–≤ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤. –í –æ—Å—Ç–∞–ª—å–Ω–æ–º –æ–Ω–∏ –∏–¥–µ–Ω—Ç–∏—á–Ω—ã:

```js
function greet(greetWord, emoticon) {
  console.log(`${greetWord} ${this.name} ${emoticon}`)
}

const user1 = { name: 'Alex' }
const user2 = { name: 'Ivan' }

greet.call(user1, 'Hello,', ':-)')
// Hello, Alex :-)
greet.call(user2, 'Good morning,', ':-D')
// Good morning, Ivan :-D
greet.apply(user1, ['Hello,', ':-)'])
// Hello, Alex :-)
greet.apply(user2, ['Good morning,', ':-D'])
// Good morning, Ivan :-D
```

üí° –°—É—â–µ—Å—Ç–≤—É–µ—Ç –º–Ω–µ–º–æ–Ω–∏—á–µ—Å–∫–æ–µ –ø—Ä–∞–≤–∏–ª–æ: –ø–µ—Ä–≤–∞—è –±—É–∫–≤–∞ –≤ –º–µ—Ç–æ–¥–µ `apply()` –æ–∑–Ω–∞—á–∞–µ—Ç—Å—è `Array`

## Be able to replace `this` value
`call()`, `apply()`, `bind()`

## Be able to use `call` and `apply` Function built-in methods
–û–ø–∏—Å–∞–Ω–æ –∑–¥–µ—Å—å [—Ç—É—Ç–∞](https://github.com/Timothy7310/Core-JS/edit/main/main/core-js/Advanced-Functions.md#manage-this)

## Know how to bind `this` scope to function
–û—Å–æ–±–Ω—è–∫–æ–º —Å—Ç–æ–∏—Ç `bind()`. –≠—Ç–æ –º–µ—Ç–æ–¥, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–≤—è–∑—ã–≤–∞—Ç—å –∫–æ–Ω—Ç–µ–∫—Å—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Å —Ñ—É–Ω–∫—Ü–∏–µ–π, —á—Ç–æ–±—ã ¬´–∑–∞—Ä–∞–Ω–µ–µ –∏ —Ç–æ—á–Ω–æ¬ª –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å, –∫–∞–∫–æ–µ –∏–º–µ–Ω–Ω–æ –∑–Ω–∞—á–µ–Ω–∏–µ –±—É–¥–µ—Ç —É `this`.

```js
function greet() {
  console.log(`Hello, ${this.name}`)
}

const user1 = { name: 'Alex' }

const greetAlex = greet.bind(user1)
greetAlex()
// Hello, Alex
```

–û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ, —á—Ç–æ `bind()`, –≤ –æ—Ç–ª–∏—á–∏–µ –æ—Ç `call()` –∏ `apply()`, –Ω–µ –≤—ã–∑—ã–≤–∞–µ—Ç —Ñ—É–Ω–∫—Ü–∏—é —Å—Ä–∞–∑—É. 
–í–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ –æ–Ω –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –¥—Ä—É–≥—É—é —Ñ—É–Ω–∫—Ü–∏—é ‚Äî —Å–≤—è–∑–∞–Ω–Ω—É—é —Å —É–∫–∞–∑–∞–Ω–Ω—ã–º –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º –Ω–∞–≤—Å–µ–≥–¥–∞. –ö–æ–Ω—Ç–µ–∫—Å—Ç —É —ç—Ç–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ –∏–∑–º–µ–Ω–∏—Ç—å –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ.

```js
function getAge() {
  console.log(this.age);
}

const howOldAmI = getAge.bind({age: 20}).bind({age: 30})

howOldAmI();
//20
```

## Binding, binding one function twice

## Links
- [this: –∫–æ–Ω—Ç–µ–∫—Å—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–π](https://doka.guide/js/function-context/)
- [–ü–æ—Ç–µ—Ä—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –≤ JavaScript](https://www.code.mu/ru/javascript/book/prime/context/context-losing/)
- [–ü—Ä–∏–≤—è–∑–∫–∞ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –∫ —Ñ—É–Ω–∫—Ü–∏–∏](https://frontend-blog-tau.vercel.app/bind)
